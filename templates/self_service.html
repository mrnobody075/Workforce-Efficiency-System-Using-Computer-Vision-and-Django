{% extends "base.html" %}
{% load static %}
{% block title %}Self-Service Portal{% endblock %}

{% block content %}

<div class="max-w-xl mx-auto bg-slate-800 border border-slate-700 rounded-xl p-8 shadow-lg">

    <h2 class="text-2xl font-semibold text-slate-100 mb-6 text-center">
        Self-Service Portal
    </h2>

    {% if messages %}
        <div class="mb-4">
            {% for msg in messages %}
                <p class="p-3 rounded 
                    {% if msg.tags == 'error' %}
                        bg-red-900/30 text-red-300 
                    {% else %}
                        bg-emerald-900/30 text-emerald-300
                    {% endif %}
                ">
                    {{ msg }}
                </p>
            {% endfor %}
        </div>
    {% endif %}

    <form method="POST" action="{% url 'self_service' %}" class="space-y-4">
        {% csrf_token %}

        <!-- Employee ID (read-only) -->
        <div>
            <label class="text-slate-300 text-sm">Employee ID</label>
            <input type="text" value="{{ employee.employeeid }}" readonly
                class="w-full mt-1 bg-slate-700 border border-slate-600 text-slate-300 
                       rounded-lg px-3 py-2 cursor-not-allowed">
        </div>

        <!-- Phone -->
        <div>
            <label for="phone_no" class="text-slate-300 text-sm">Phone Number</label>
            <input type="text" id="phone_no" name="phone_no" value="{{ employee.phone_no }}"
                class="w-full mt-1 bg-slate-700 border border-slate-600 text-slate-200 
                       rounded-lg px-3 py-2 focus:ring focus:ring-slate-500">
        </div>

        <!-- Address -->
        <div>
            <label for="address" class="text-slate-300 text-sm">Address</label>
            <input type="text" id="address" name="address" value="{{ employee.address }}"
                class="w-full mt-1 bg-slate-700 border border-slate-600 text-slate-200 
                       rounded-lg px-3 py-2 focus:ring focus:ring-slate-500">
        </div>

        <!-- Email -->
        <div>
            <label for="email" class="text-slate-300 text-sm">Email</label>
            <input type="email" id="email" name="email" value="{{ employee.email }}"
                class="w-full mt-1 bg-slate-700 border border-slate-600 text-slate-200 
                       rounded-lg px-3 py-2 focus:ring focus:ring-slate-500">
        </div>

        <!-- DOB -->
        <div>
            <label for="dob" class="text-slate-300 text-sm">Date of Birth</label>
            <input type="date" id="dob" name="dob" value="{{ employee.dob|date:'Y-m-d' }}"
                class="w-full mt-1 bg-slate-700 border border-slate-600 text-slate-200 
                       rounded-lg px-3 py-2 focus:ring focus:ring-slate-500">
        </div>

        <button type="submit"
            class="w-full bg-slate-600 hover:bg-slate-500 text-white font-medium 
                   py-2 rounded-lg transition">
            Update Details
        </button>
    </form>

</div>

{% endblock %}
