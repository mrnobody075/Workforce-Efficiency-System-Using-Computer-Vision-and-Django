{% extends "base.html" %}
{% load static %}
{% block title %}Leave Application{% endblock %}

{% block content %}
<div class="max-w-xl mx-auto">
  <div class="bg-slate-800 border border-slate-700 rounded-xl p-6 shadow-lg">
    <h1 class="text-2xl font-semibold text-slate-100 mb-4">Leave Application</h1>

    {% if messages %}
      <div class="mb-4 space-y-2">
        {% for msg in messages %}
          <div class="p-3 rounded-md {% if 'error' in msg.tags %}bg-red-900/30 text-red-300 border border-red-700{% else %}bg-slate-700 text-slate-200 border border-slate-600{% endif %}">
            {{ msg }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <p class="text-slate-300 mb-4">
      <strong class="text-slate-100">Employee:</strong>
      {{ employee.name }} ({{ employee.employeeid }})
    </p>

    <form method="POST" action="{% url 'leave_application' %}" class="space-y-4">
      {% csrf_token %}

      <div>
        <label class="block text-sm text-slate-300 mb-1" for="leave_type">Leave Type</label>
        <input id="leave_type" name="leave_type" required
               class="w-full rounded-md bg-slate-700 border border-slate-600 text-slate-200 px-3 py-2"
               placeholder="e.g. Casual / Sick / Earned">
      </div>

      <div class="grid grid-cols-2 gap-3">
        <div>
          <label class="block text-sm text-slate-300 mb-1" for="start_date">Start Date</label>
          <input id="start_date" name="start_date" type="date" required
                 class="w-full rounded-md bg-slate-700 border border-slate-600 text-slate-200 px-3 py-2">
        </div>
        <div>
          <label class="block text-sm text-slate-300 mb-1" for="end_date">End Date</label>
          <input id="end_date" name="end_date" type="date" required
                 class="w-full rounded-md bg-slate-700 border border-slate-600 text-slate-200 px-3 py-2">
        </div>
      </div>

      <div>
        <label class="block text-sm text-slate-300 mb-1" for="reason">Reason</label>
        <textarea id="reason" name="reason" rows="4" required
                  class="w-full rounded-md bg-slate-700 border border-slate-600 text-slate-200 px-3 py-2"
                  placeholder="Provide a short reason for your leave."></textarea>
      </div>

      <div class="flex items-center gap-3">
        <button type="submit" class="px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white">Submit Application</button>
        <a href="{% url 'home' %}" class="text-slate-400 hover:text-slate-200">Cancel</a>
      </div>
    </form>

    {% if success_message %}
      <div class="mt-4 p-3 rounded bg-slate-700 text-slate-200 border border-slate-600">
        {{ success_message }}
      </div>
    {% endif %}
    {% if error_message %}
      <div class="mt-4 p-3 rounded bg-red-900/30 text-red-300 border border-red-700">
        {{ error_message }}
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
